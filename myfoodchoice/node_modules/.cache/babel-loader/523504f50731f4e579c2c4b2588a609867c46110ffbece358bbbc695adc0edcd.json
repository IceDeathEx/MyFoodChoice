{"ast":null,"code":"'use strict';\n\nconst EventEmitter = require('events').EventEmitter;\nconst Timers = require('timers');\nclass Command extends EventEmitter {\n  constructor() {\n    super();\n    this.next = null;\n  }\n\n  // slow. debug only\n  stateName() {\n    const state = this.next;\n    for (const i in this) {\n      if (this[i] === state && i !== 'next') {\n        return i;\n      }\n    }\n    return 'unknown name';\n  }\n  execute(packet, connection) {\n    if (!this.next) {\n      this.next = this.start;\n      connection._resetSequenceId();\n    }\n    if (packet && packet.isError()) {\n      const err = packet.asError(connection.clientEncoding);\n      err.sql = this.sql || this.query;\n      if (this.queryTimeout) {\n        Timers.clearTimeout(this.queryTimeout);\n        this.queryTimeout = null;\n      }\n      if (this.onResult) {\n        this.onResult(err);\n        this.emit('end');\n      } else {\n        this.emit('error', err);\n        this.emit('end');\n      }\n      return true;\n    }\n    // TODO: don't return anything from execute, it's ugly and error-prone. Listen for 'end' event in connection\n    this.next = this.next(packet, connection);\n    if (this.next) {\n      return false;\n    }\n    this.emit('end');\n    return true;\n  }\n}\nmodule.exports = Command;","map":{"version":3,"names":["EventEmitter","require","Timers","Command","constructor","next","stateName","state","i","execute","packet","connection","start","_resetSequenceId","isError","err","asError","clientEncoding","sql","query","queryTimeout","clearTimeout","onResult","emit","module","exports"],"sources":["C:/Users/runes/FYP/myfoodchoice/node_modules/mysql2/lib/commands/command.js"],"sourcesContent":["'use strict';\n\nconst EventEmitter = require('events').EventEmitter;\nconst Timers = require('timers');\n\nclass Command extends EventEmitter {\n  constructor() {\n    super();\n    this.next = null;\n  }\n\n  // slow. debug only\n  stateName() {\n    const state = this.next;\n    for (const i in this) {\n      if (this[i] === state && i !== 'next') {\n        return i;\n      }\n    }\n    return 'unknown name';\n  }\n\n  execute(packet, connection) {\n    if (!this.next) {\n      this.next = this.start;\n      connection._resetSequenceId();\n    }\n    if (packet && packet.isError()) {\n      const err = packet.asError(connection.clientEncoding);\n      err.sql = this.sql || this.query;\n      if (this.queryTimeout) {\n        Timers.clearTimeout(this.queryTimeout);\n        this.queryTimeout = null;\n      }\n      if (this.onResult) {\n        this.onResult(err);\n        this.emit('end');\n      } else {\n        this.emit('error', err);\n        this.emit('end');\n      }\n      return true;\n    }\n    // TODO: don't return anything from execute, it's ugly and error-prone. Listen for 'end' event in connection\n    this.next = this.next(packet, connection);\n    if (this.next) {\n      return false;\n    } \n    this.emit('end');\n    return true;\n    \n  }\n}\n\nmodule.exports = Command;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,YAAY,GAAGC,OAAO,CAAC,QAAQ,CAAC,CAACD,YAAY;AACnD,MAAME,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAME,OAAO,SAASH,YAAY,CAAC;EACjCI,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC;IACP,IAAI,CAACC,IAAI,GAAG,IAAI;EAClB;;EAEA;EACAC,SAASA,CAAA,EAAG;IACV,MAAMC,KAAK,GAAG,IAAI,CAACF,IAAI;IACvB,KAAK,MAAMG,CAAC,IAAI,IAAI,EAAE;MACpB,IAAI,IAAI,CAACA,CAAC,CAAC,KAAKD,KAAK,IAAIC,CAAC,KAAK,MAAM,EAAE;QACrC,OAAOA,CAAC;MACV;IACF;IACA,OAAO,cAAc;EACvB;EAEAC,OAAOA,CAACC,MAAM,EAAEC,UAAU,EAAE;IAC1B,IAAI,CAAC,IAAI,CAACN,IAAI,EAAE;MACd,IAAI,CAACA,IAAI,GAAG,IAAI,CAACO,KAAK;MACtBD,UAAU,CAACE,gBAAgB,CAAC,CAAC;IAC/B;IACA,IAAIH,MAAM,IAAIA,MAAM,CAACI,OAAO,CAAC,CAAC,EAAE;MAC9B,MAAMC,GAAG,GAAGL,MAAM,CAACM,OAAO,CAACL,UAAU,CAACM,cAAc,CAAC;MACrDF,GAAG,CAACG,GAAG,GAAG,IAAI,CAACA,GAAG,IAAI,IAAI,CAACC,KAAK;MAChC,IAAI,IAAI,CAACC,YAAY,EAAE;QACrBlB,MAAM,CAACmB,YAAY,CAAC,IAAI,CAACD,YAAY,CAAC;QACtC,IAAI,CAACA,YAAY,GAAG,IAAI;MAC1B;MACA,IAAI,IAAI,CAACE,QAAQ,EAAE;QACjB,IAAI,CAACA,QAAQ,CAACP,GAAG,CAAC;QAClB,IAAI,CAACQ,IAAI,CAAC,KAAK,CAAC;MAClB,CAAC,MAAM;QACL,IAAI,CAACA,IAAI,CAAC,OAAO,EAAER,GAAG,CAAC;QACvB,IAAI,CAACQ,IAAI,CAAC,KAAK,CAAC;MAClB;MACA,OAAO,IAAI;IACb;IACA;IACA,IAAI,CAAClB,IAAI,GAAG,IAAI,CAACA,IAAI,CAACK,MAAM,EAAEC,UAAU,CAAC;IACzC,IAAI,IAAI,CAACN,IAAI,EAAE;MACb,OAAO,KAAK;IACd;IACA,IAAI,CAACkB,IAAI,CAAC,KAAK,CAAC;IAChB,OAAO,IAAI;EAEb;AACF;AAEAC,MAAM,CAACC,OAAO,GAAGtB,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}