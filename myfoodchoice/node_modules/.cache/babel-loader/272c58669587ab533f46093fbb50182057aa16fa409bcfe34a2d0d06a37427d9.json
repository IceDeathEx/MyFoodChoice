{"ast":null,"code":"'use strict';\n\n// http://dev.mysql.com/doc/internals/en/com-register-slave.html\n// note that documentation is incorrect, for example command code is actually 0x15 but documented as 0x14\nconst Packet = require('../packets/packet');\nconst CommandCodes = require('../constants/commands');\nclass RegisterSlave {\n  constructor(opts) {\n    this.serverId = opts.serverId || 0;\n    this.slaveHostname = opts.slaveHostname || '';\n    this.slaveUser = opts.slaveUser || '';\n    this.slavePassword = opts.slavePassword || '';\n    this.slavePort = opts.slavePort || 0;\n    this.replicationRank = opts.replicationRank || 0;\n    this.masterId = opts.masterId || 0;\n  }\n  toPacket() {\n    const length = 15 +\n    // TODO: should be ascii?\n    Buffer.byteLength(this.slaveHostname, 'utf8') + Buffer.byteLength(this.slaveUser, 'utf8') + Buffer.byteLength(this.slavePassword, 'utf8') + 3 + 4;\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(CommandCodes.REGISTER_SLAVE);\n    packet.writeInt32(this.serverId);\n    packet.writeInt8(Buffer.byteLength(this.slaveHostname, 'utf8'));\n    packet.writeString(this.slaveHostname);\n    packet.writeInt8(Buffer.byteLength(this.slaveUser, 'utf8'));\n    packet.writeString(this.slaveUser);\n    packet.writeInt8(Buffer.byteLength(this.slavePassword, 'utf8'));\n    packet.writeString(this.slavePassword);\n    packet.writeInt16(this.slavePort);\n    packet.writeInt32(this.replicationRank);\n    packet.writeInt32(this.masterId);\n    return packet;\n  }\n}\nmodule.exports = RegisterSlave;","map":{"version":3,"names":["Packet","require","CommandCodes","RegisterSlave","constructor","opts","serverId","slaveHostname","slaveUser","slavePassword","slavePort","replicationRank","masterId","toPacket","length","Buffer","byteLength","buffer","allocUnsafe","packet","offset","writeInt8","REGISTER_SLAVE","writeInt32","writeString","writeInt16","module","exports"],"sources":["D:/UOW_FYP/FYP1/myfoodchoice/node_modules/mysql2/lib/packets/register_slave.js"],"sourcesContent":["'use strict';\n\n// http://dev.mysql.com/doc/internals/en/com-register-slave.html\n// note that documentation is incorrect, for example command code is actually 0x15 but documented as 0x14\n\nconst Packet = require('../packets/packet');\nconst CommandCodes = require('../constants/commands');\n\nclass RegisterSlave {\n  constructor(opts) {\n    this.serverId = opts.serverId || 0;\n    this.slaveHostname = opts.slaveHostname || '';\n    this.slaveUser = opts.slaveUser || '';\n    this.slavePassword = opts.slavePassword || '';\n    this.slavePort = opts.slavePort || 0;\n    this.replicationRank = opts.replicationRank || 0;\n    this.masterId = opts.masterId || 0;\n  }\n\n  toPacket() {\n    const length =\n      15 + // TODO: should be ascii?\n      Buffer.byteLength(this.slaveHostname, 'utf8') +\n      Buffer.byteLength(this.slaveUser, 'utf8') +\n      Buffer.byteLength(this.slavePassword, 'utf8') +\n      3 +\n      4;\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(CommandCodes.REGISTER_SLAVE);\n    packet.writeInt32(this.serverId);\n    packet.writeInt8(Buffer.byteLength(this.slaveHostname, 'utf8'));\n    packet.writeString(this.slaveHostname);\n    packet.writeInt8(Buffer.byteLength(this.slaveUser, 'utf8'));\n    packet.writeString(this.slaveUser);\n    packet.writeInt8(Buffer.byteLength(this.slavePassword, 'utf8'));\n    packet.writeString(this.slavePassword);\n    packet.writeInt16(this.slavePort);\n    packet.writeInt32(this.replicationRank);\n    packet.writeInt32(this.masterId);\n    return packet;\n  }\n}\n\nmodule.exports = RegisterSlave;\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAC3C,MAAMC,YAAY,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAErD,MAAME,aAAa,CAAC;EAClBC,WAAWA,CAACC,IAAI,EAAE;IAChB,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAACC,QAAQ,IAAI,CAAC;IAClC,IAAI,CAACC,aAAa,GAAGF,IAAI,CAACE,aAAa,IAAI,EAAE;IAC7C,IAAI,CAACC,SAAS,GAAGH,IAAI,CAACG,SAAS,IAAI,EAAE;IACrC,IAAI,CAACC,aAAa,GAAGJ,IAAI,CAACI,aAAa,IAAI,EAAE;IAC7C,IAAI,CAACC,SAAS,GAAGL,IAAI,CAACK,SAAS,IAAI,CAAC;IACpC,IAAI,CAACC,eAAe,GAAGN,IAAI,CAACM,eAAe,IAAI,CAAC;IAChD,IAAI,CAACC,QAAQ,GAAGP,IAAI,CAACO,QAAQ,IAAI,CAAC;EACpC;EAEAC,QAAQA,CAAA,EAAG;IACT,MAAMC,MAAM,GACV,EAAE;IAAG;IACLC,MAAM,CAACC,UAAU,CAAC,IAAI,CAACT,aAAa,EAAE,MAAM,CAAC,GAC7CQ,MAAM,CAACC,UAAU,CAAC,IAAI,CAACR,SAAS,EAAE,MAAM,CAAC,GACzCO,MAAM,CAACC,UAAU,CAAC,IAAI,CAACP,aAAa,EAAE,MAAM,CAAC,GAC7C,CAAC,GACD,CAAC;IACH,MAAMQ,MAAM,GAAGF,MAAM,CAACG,WAAW,CAACJ,MAAM,CAAC;IACzC,MAAMK,MAAM,GAAG,IAAInB,MAAM,CAAC,CAAC,EAAEiB,MAAM,EAAE,CAAC,EAAEH,MAAM,CAAC;IAC/CK,MAAM,CAACC,MAAM,GAAG,CAAC;IACjBD,MAAM,CAACE,SAAS,CAACnB,YAAY,CAACoB,cAAc,CAAC;IAC7CH,MAAM,CAACI,UAAU,CAAC,IAAI,CAACjB,QAAQ,CAAC;IAChCa,MAAM,CAACE,SAAS,CAACN,MAAM,CAACC,UAAU,CAAC,IAAI,CAACT,aAAa,EAAE,MAAM,CAAC,CAAC;IAC/DY,MAAM,CAACK,WAAW,CAAC,IAAI,CAACjB,aAAa,CAAC;IACtCY,MAAM,CAACE,SAAS,CAACN,MAAM,CAACC,UAAU,CAAC,IAAI,CAACR,SAAS,EAAE,MAAM,CAAC,CAAC;IAC3DW,MAAM,CAACK,WAAW,CAAC,IAAI,CAAChB,SAAS,CAAC;IAClCW,MAAM,CAACE,SAAS,CAACN,MAAM,CAACC,UAAU,CAAC,IAAI,CAACP,aAAa,EAAE,MAAM,CAAC,CAAC;IAC/DU,MAAM,CAACK,WAAW,CAAC,IAAI,CAACf,aAAa,CAAC;IACtCU,MAAM,CAACM,UAAU,CAAC,IAAI,CAACf,SAAS,CAAC;IACjCS,MAAM,CAACI,UAAU,CAAC,IAAI,CAACZ,eAAe,CAAC;IACvCQ,MAAM,CAACI,UAAU,CAAC,IAAI,CAACX,QAAQ,CAAC;IAChC,OAAOO,MAAM;EACf;AACF;AAEAO,MAAM,CAACC,OAAO,GAAGxB,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}