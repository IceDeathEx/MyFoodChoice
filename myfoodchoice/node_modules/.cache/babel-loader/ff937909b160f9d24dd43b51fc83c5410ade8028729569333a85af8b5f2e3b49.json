{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/runes/FYP/myfoodchoice/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"C:/Users/runes/FYP/myfoodchoice/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"C:/Users/runes/FYP/myfoodchoice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";// import React from 'react';\n// import ReactDOM from 'react-dom/client';\n// import './index.css';\n// import App from './App';\n// import Login from './Login.js';\n// const root = ReactDOM.createRoot(document.getElementById('root'));\n// root.render(\n//   <React.StrictMode>\n//     <App />\n//     <Login />\n//   </React.StrictMode>\n// );\nvar express=require(\"express\");var _require=require(\"./utils/queryHelpers\"),addEmployee=_require.addEmployee,getEmployee=_require.getEmployee;var app=express();var genericError=\"Sorry, something went wrong!\";app.use(express.json());app.post(\"/\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(request,response){var _request$body,email,name,password,gender,acctype,_yield$addUser,_yield$addUser2,result,_yield$getUser,_yield$getUser2,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_request$body=request.body,email=_request$body.email,name=_request$body.name,password=_request$body.password,gender=_request$body.gender,acctype=_request$body.acctype;_context.next=4;return addUser(email,name,password,gender,acctype);case 4:_yield$addUser=_context.sent;_yield$addUser2=_slicedToArray(_yield$addUser,1);result=_yield$addUser2[0];if(!result.insertId){_context.next=16;break;}_context.next=10;return getUser(result.insertId);case 10:_yield$getUser=_context.sent;_yield$getUser2=_slicedToArray(_yield$getUser,1);data=_yield$getUser2[0];response.send({success:true,result:data[0]});_context.next=17;break;case 16:response.status(500).send({success:false,error:genericError});case 17:_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](0);response.status(500).send({success:false,error:genericError});case 22:case\"end\":return _context.stop();}},_callee,null,[[0,19]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());app.get(\"/:id\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(request,response){var email,_yield$getUser3,_yield$getUser4,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:email=request.params.email;_context2.prev=1;_context2.next=4;return getUser(email);case 4:_yield$getUser3=_context2.sent;_yield$getUser4=_slicedToArray(_yield$getUser3,1);result=_yield$getUser4[0];if(result.length>0){response.send({success:true,result:result[0]});}else{response.status(404).send({success:false,error:\"No user found with id \".concat(id)});}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);response.status(500).send({success:false,error:genericError});case 13:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());app.listen(8001);","map":{"version":3,"names":["express","require","_require","addEmployee","getEmployee","app","genericError","use","json","post","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","response","_request$body","email","name","password","gender","acctype","_yield$addUser","_yield$addUser2","result","_yield$getUser","_yield$getUser2","data","wrap","_callee$","_context","prev","next","body","addUser","sent","_slicedToArray","insertId","getUser","send","success","status","error","t0","stop","_x","_x2","apply","arguments","get","_ref2","_callee2","_yield$getUser3","_yield$getUser4","_callee2$","_context2","params","length","concat","id","_x3","_x4","listen"],"sources":["C:/Users/runes/FYP/myfoodchoice/src/index.js"],"sourcesContent":["// import React from 'react';\n// import ReactDOM from 'react-dom/client';\n// import './index.css';\n// import App from './App';\n// import Login from './Login.js';\n\n// const root = ReactDOM.createRoot(document.getElementById('root'));\n// root.render(\n//   <React.StrictMode>\n//     <App />\n//     <Login />\n//   </React.StrictMode>\n// );\nconst express = require(\"express\")\nconst { addEmployee, getEmployee } = require(\"./utils/queryHelpers\")\nconst app = express()\n\nconst genericError = \"Sorry, something went wrong!\"\n\napp.use(express.json())\n\napp.post(\"/\", async function (request, response) {\n  try {\n    const { email, name, password, gender, acctype } = request.body\n    const [result] = await addUser(email, name, password, gender, acctype)\n    if (result.insertId) {\n      const [data] = await getUser(result.insertId)\n      response.send({ success: true, result: data[0] })\n    } else {\n      response.status(500).send({\n        success: false,\n        error: genericError,\n      })\n    }\n  } catch (error) {\n    response.status(500).send({\n      success: false,\n      error: genericError,\n    })\n  }\n})\n\napp.get(\"/:id\", async function (request, response) {\n  const { email } = request.params\n  try {\n    const [result] = await getUser(email)\n    if (result.length > 0) {\n      response.send({ success: true, result: result[0] })\n    } else {\n      response.status(404).send({\n        success: false,\n        error: `No user found with id ${id}`,\n      })\n    }\n  } catch (error) {\n    response.status(500).send({\n      success: false,\n      error: genericError,\n    })\n  }\n})\n\napp.listen(8001)\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}