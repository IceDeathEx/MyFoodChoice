{"ast":null,"code":"'use strict';\n\n// http://dev.mysql.com/doc/internals/en/com-binlog-dump.html#packet-COM_BINLOG_DUMP\nconst Packet = require('../packets/packet');\nconst CommandCodes = require('../constants/commands');\n\n// TODO: add flag to constants\n// 0x01 - BINLOG_DUMP_NON_BLOCK\n// send EOF instead of blocking\nclass BinlogDump {\n  constructor(opts) {\n    this.binlogPos = opts.binlogPos || 0;\n    this.serverId = opts.serverId || 0;\n    this.flags = opts.flags || 0;\n    this.filename = opts.filename || '';\n  }\n  toPacket() {\n    const length = 15 + Buffer.byteLength(this.filename, 'utf8'); // TODO: should be ascii?\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(CommandCodes.BINLOG_DUMP);\n    packet.writeInt32(this.binlogPos);\n    packet.writeInt16(this.flags);\n    packet.writeInt32(this.serverId);\n    packet.writeString(this.filename);\n    return packet;\n  }\n}\nmodule.exports = BinlogDump;","map":{"version":3,"names":["Packet","require","CommandCodes","BinlogDump","constructor","opts","binlogPos","serverId","flags","filename","toPacket","length","Buffer","byteLength","buffer","allocUnsafe","packet","offset","writeInt8","BINLOG_DUMP","writeInt32","writeInt16","writeString","module","exports"],"sources":["D:/UOW_FYP/FYP1/myfoodchoice/node_modules/mysql2/lib/packets/binlog_dump.js"],"sourcesContent":["'use strict';\n\n// http://dev.mysql.com/doc/internals/en/com-binlog-dump.html#packet-COM_BINLOG_DUMP\n\nconst Packet = require('../packets/packet');\nconst CommandCodes = require('../constants/commands');\n\n// TODO: add flag to constants\n// 0x01 - BINLOG_DUMP_NON_BLOCK\n// send EOF instead of blocking\nclass BinlogDump {\n  constructor(opts) {\n    this.binlogPos = opts.binlogPos || 0;\n    this.serverId = opts.serverId || 0;\n    this.flags = opts.flags || 0;\n    this.filename = opts.filename || '';\n  }\n\n  toPacket() {\n    const length = 15 + Buffer.byteLength(this.filename, 'utf8'); // TODO: should be ascii?\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(CommandCodes.BINLOG_DUMP);\n    packet.writeInt32(this.binlogPos);\n    packet.writeInt16(this.flags);\n    packet.writeInt32(this.serverId);\n    packet.writeString(this.filename);\n    return packet;\n  }\n}\n\nmodule.exports = BinlogDump;\n"],"mappings":"AAAA,YAAY;;AAEZ;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAC3C,MAAMC,YAAY,GAAGD,OAAO,CAAC,uBAAuB,CAAC;;AAErD;AACA;AACA;AACA,MAAME,UAAU,CAAC;EACfC,WAAWA,CAACC,IAAI,EAAE;IAChB,IAAI,CAACC,SAAS,GAAGD,IAAI,CAACC,SAAS,IAAI,CAAC;IACpC,IAAI,CAACC,QAAQ,GAAGF,IAAI,CAACE,QAAQ,IAAI,CAAC;IAClC,IAAI,CAACC,KAAK,GAAGH,IAAI,CAACG,KAAK,IAAI,CAAC;IAC5B,IAAI,CAACC,QAAQ,GAAGJ,IAAI,CAACI,QAAQ,IAAI,EAAE;EACrC;EAEAC,QAAQA,CAAA,EAAG;IACT,MAAMC,MAAM,GAAG,EAAE,GAAGC,MAAM,CAACC,UAAU,CAAC,IAAI,CAACJ,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC;IAC9D,MAAMK,MAAM,GAAGF,MAAM,CAACG,WAAW,CAACJ,MAAM,CAAC;IACzC,MAAMK,MAAM,GAAG,IAAIhB,MAAM,CAAC,CAAC,EAAEc,MAAM,EAAE,CAAC,EAAEH,MAAM,CAAC;IAC/CK,MAAM,CAACC,MAAM,GAAG,CAAC;IACjBD,MAAM,CAACE,SAAS,CAAChB,YAAY,CAACiB,WAAW,CAAC;IAC1CH,MAAM,CAACI,UAAU,CAAC,IAAI,CAACd,SAAS,CAAC;IACjCU,MAAM,CAACK,UAAU,CAAC,IAAI,CAACb,KAAK,CAAC;IAC7BQ,MAAM,CAACI,UAAU,CAAC,IAAI,CAACb,QAAQ,CAAC;IAChCS,MAAM,CAACM,WAAW,CAAC,IAAI,CAACb,QAAQ,CAAC;IACjC,OAAOO,MAAM;EACf;AACF;AAEAO,MAAM,CAACC,OAAO,GAAGrB,UAAU"},"metadata":{},"sourceType":"script","externalDependencies":[]}