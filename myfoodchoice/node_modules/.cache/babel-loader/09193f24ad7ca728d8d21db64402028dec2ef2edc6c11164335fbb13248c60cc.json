{"ast":null,"code":"'use strict';\n\nconst process = require('process');\nconst mysql = require('../index.js');\nconst EventEmitter = require('events').EventEmitter;\nconst PoolConnection = require('./pool_connection.js');\nconst Queue = require('denque');\nconst Connection = require('./connection.js');\nfunction spliceConnection(queue, connection) {\n  const len = queue.length;\n  for (let i = 0; i < len; i++) {\n    if (queue.get(i) === connection) {\n      queue.removeOne(i);\n      break;\n    }\n  }\n}\nclass Pool extends EventEmitter {\n  constructor(options) {\n    super();\n    this.config = options.config;\n    this.config.connectionConfig.pool = this;\n    this._allConnections = new Queue();\n    this._freeConnections = new Queue();\n    this._connectionQueue = new Queue();\n    this._closed = false;\n    if (this.config.maxIdle < this.config.connectionLimit) {\n      // create idle connection timeout automatically release job\n      this._removeIdleTimeoutConnections();\n    }\n  }\n  promise(promiseImpl) {\n    const PromisePool = require('../promise').PromisePool;\n    return new PromisePool(this, promiseImpl);\n  }\n  getConnection(cb) {\n    if (this._closed) {\n      return process.nextTick(() => cb(new Error('Pool is closed.')));\n    }\n    let connection;\n    if (this._freeConnections.length > 0) {\n      connection = this._freeConnections.pop();\n      this.emit('acquire', connection);\n      return process.nextTick(() => cb(null, connection));\n    }\n    if (this.config.connectionLimit === 0 || this._allConnections.length < this.config.connectionLimit) {\n      connection = new PoolConnection(this, {\n        config: this.config.connectionConfig\n      });\n      this._allConnections.push(connection);\n      return connection.connect(err => {\n        if (this._closed) {\n          return cb(new Error('Pool is closed.'));\n        }\n        if (err) {\n          return cb(err);\n        }\n        this.emit('connection', connection);\n        this.emit('acquire', connection);\n        return cb(null, connection);\n      });\n    }\n    if (!this.config.waitForConnections) {\n      return process.nextTick(() => cb(new Error('No connections available.')));\n    }\n    if (this.config.queueLimit && this._connectionQueue.length >= this.config.queueLimit) {\n      return cb(new Error('Queue limit reached.'));\n    }\n    this.emit('enqueue');\n    return this._connectionQueue.push(cb);\n  }\n  releaseConnection(connection) {\n    let cb;\n    if (!connection._pool) {\n      // The connection has been removed from the pool and is no longer good.\n      if (this._connectionQueue.length) {\n        cb = this._connectionQueue.shift();\n        process.nextTick(this.getConnection.bind(this, cb));\n      }\n    } else if (this._connectionQueue.length) {\n      cb = this._connectionQueue.shift();\n      process.nextTick(cb.bind(null, null, connection));\n    } else {\n      this._freeConnections.push(connection);\n      this.emit('release', connection);\n    }\n  }\n  end(cb) {\n    this._closed = true;\n    if (typeof cb !== 'function') {\n      cb = function (err) {\n        if (err) {\n          throw err;\n        }\n      };\n    }\n    let calledBack = false;\n    let closedConnections = 0;\n    let connection;\n    const endCB = function (err) {\n      if (calledBack) {\n        return;\n      }\n      if (err || ++closedConnections >= this._allConnections.length) {\n        calledBack = true;\n        cb(err);\n        return;\n      }\n    }.bind(this);\n    if (this._allConnections.length === 0) {\n      endCB();\n      return;\n    }\n    for (let i = 0; i < this._allConnections.length; i++) {\n      connection = this._allConnections.get(i);\n      connection._realEnd(endCB);\n    }\n  }\n  query(sql, values, cb) {\n    const cmdQuery = Connection.createQuery(sql, values, cb, this.config.connectionConfig);\n    if (typeof cmdQuery.namedPlaceholders === 'undefined') {\n      cmdQuery.namedPlaceholders = this.config.connectionConfig.namedPlaceholders;\n    }\n    this.getConnection((err, conn) => {\n      if (err) {\n        if (typeof cmdQuery.onResult === 'function') {\n          cmdQuery.onResult(err);\n        } else {\n          cmdQuery.emit('error', err);\n        }\n        return;\n      }\n      try {\n        conn.query(cmdQuery).once('end', () => {\n          conn.release();\n        });\n      } catch (e) {\n        conn.release();\n        throw e;\n      }\n    });\n    return cmdQuery;\n  }\n  execute(sql, values, cb) {\n    // TODO construct execute command first here and pass it to connection.execute\n    // so that polymorphic arguments logic is there in one place\n    if (typeof values === 'function') {\n      cb = values;\n      values = [];\n    }\n    this.getConnection((err, conn) => {\n      if (err) {\n        return cb(err);\n      }\n      try {\n        conn.execute(sql, values, cb).once('end', () => {\n          conn.release();\n        });\n      } catch (e) {\n        conn.release();\n        return cb(e);\n      }\n    });\n  }\n  _removeConnection(connection) {\n    // Remove connection from all connections\n    spliceConnection(this._allConnections, connection);\n    // Remove connection from free connections\n    spliceConnection(this._freeConnections, connection);\n    this.releaseConnection(connection);\n  }\n  _removeIdleTimeoutConnections() {\n    if (this._removeIdleTimeoutConnectionsTimer) {\n      clearTimeout(this._removeIdleTimeoutConnectionsTimer);\n    }\n    this._removeIdleTimeoutConnectionsTimer = setTimeout(() => {\n      try {\n        while (this._freeConnections.length > this.config.maxIdle && Date.now() - this._freeConnections.get(0).lastActiveTime > this.config.idleTimeout) {\n          this._freeConnections.get(0).destroy();\n        }\n      } finally {\n        this._removeIdleTimeoutConnections();\n      }\n    }, 1000);\n  }\n  format(sql, values) {\n    return mysql.format(sql, values, this.config.connectionConfig.stringifyObjects, this.config.connectionConfig.timezone);\n  }\n  escape(value) {\n    return mysql.escape(value, this.config.connectionConfig.stringifyObjects, this.config.connectionConfig.timezone);\n  }\n  escapeId(value) {\n    return mysql.escapeId(value, false);\n  }\n}\nmodule.exports = Pool;","map":{"version":3,"names":["process","require","mysql","EventEmitter","PoolConnection","Queue","Connection","spliceConnection","queue","connection","len","length","i","get","removeOne","Pool","constructor","options","config","connectionConfig","pool","_allConnections","_freeConnections","_connectionQueue","_closed","maxIdle","connectionLimit","_removeIdleTimeoutConnections","promise","promiseImpl","PromisePool","getConnection","cb","nextTick","Error","pop","emit","push","connect","err","waitForConnections","queueLimit","releaseConnection","_pool","shift","bind","end","calledBack","closedConnections","endCB","_realEnd","query","sql","values","cmdQuery","createQuery","namedPlaceholders","conn","onResult","once","release","e","execute","_removeConnection","_removeIdleTimeoutConnectionsTimer","clearTimeout","setTimeout","Date","now","lastActiveTime","idleTimeout","destroy","format","stringifyObjects","timezone","escape","value","escapeId","module","exports"],"sources":["C:/Users/runes/FYP/myfoodchoice/node_modules/mysql2/lib/pool.js"],"sourcesContent":["'use strict';\n\nconst process = require('process');\nconst mysql = require('../index.js');\n\nconst EventEmitter = require('events').EventEmitter;\nconst PoolConnection = require('./pool_connection.js');\nconst Queue = require('denque');\nconst Connection = require('./connection.js');\n\nfunction spliceConnection(queue, connection) {\n  const len = queue.length;\n  for (let i = 0; i < len; i++) {\n    if (queue.get(i) === connection) {\n      queue.removeOne(i);\n      break;\n    }\n  }\n}\n\nclass Pool extends EventEmitter {\n  constructor(options) {\n    super();\n    this.config = options.config;\n    this.config.connectionConfig.pool = this;\n    this._allConnections = new Queue();\n    this._freeConnections = new Queue();\n    this._connectionQueue = new Queue();\n    this._closed = false;\n    if (this.config.maxIdle < this.config.connectionLimit) {\n      // create idle connection timeout automatically release job\n      this._removeIdleTimeoutConnections();\n    }\n  }\n\n  promise(promiseImpl) {\n    const PromisePool = require('../promise').PromisePool;\n    return new PromisePool(this, promiseImpl);\n  }\n\n  getConnection(cb) {\n    if (this._closed) {\n      return process.nextTick(() => cb(new Error('Pool is closed.')));\n    }\n    let connection;\n    if (this._freeConnections.length > 0) {\n      connection = this._freeConnections.pop();\n      this.emit('acquire', connection);\n      return process.nextTick(() => cb(null, connection));\n    }\n    if (\n      this.config.connectionLimit === 0 ||\n      this._allConnections.length < this.config.connectionLimit\n    ) {\n      connection = new PoolConnection(this, {\n        config: this.config.connectionConfig\n      });\n      this._allConnections.push(connection);\n      return connection.connect(err => {\n        if (this._closed) {\n          return cb(new Error('Pool is closed.'));\n        }\n        if (err) {\n          return cb(err);\n        }\n        this.emit('connection', connection);\n        this.emit('acquire', connection);\n        return cb(null, connection);\n      });\n    }\n    if (!this.config.waitForConnections) {\n      return process.nextTick(() => cb(new Error('No connections available.')));\n    }\n    if (\n      this.config.queueLimit &&\n      this._connectionQueue.length >= this.config.queueLimit\n    ) {\n      return cb(new Error('Queue limit reached.'));\n    }\n    this.emit('enqueue');\n    return this._connectionQueue.push(cb);\n  }\n\n  releaseConnection(connection) {\n    let cb;\n    if (!connection._pool) {\n      // The connection has been removed from the pool and is no longer good.\n      if (this._connectionQueue.length) {\n        cb = this._connectionQueue.shift();\n        process.nextTick(this.getConnection.bind(this, cb));\n      }\n    } else if (this._connectionQueue.length) {\n      cb = this._connectionQueue.shift();\n      process.nextTick(cb.bind(null, null, connection));\n    } else {\n      this._freeConnections.push(connection);\n      this.emit('release', connection);\n    }\n  }\n\n  end(cb) {\n    this._closed = true;\n    if (typeof cb !== 'function') {\n      cb = function(err) {\n        if (err) {\n          throw err;\n        }\n      };\n    }\n    let calledBack = false;\n    let closedConnections = 0;\n    let connection;\n    const endCB = function(err) {\n      if (calledBack) {\n        return;\n      }\n      if (err || ++closedConnections >= this._allConnections.length) {\n        calledBack = true;\n        cb(err);\n        return;\n      }\n    }.bind(this);\n    if (this._allConnections.length === 0) {\n      endCB();\n      return;\n    }\n    for (let i = 0; i < this._allConnections.length; i++) {\n      connection = this._allConnections.get(i);\n      connection._realEnd(endCB);\n    }\n  }\n\n  query(sql, values, cb) {\n    const cmdQuery = Connection.createQuery(\n      sql,\n      values,\n      cb,\n      this.config.connectionConfig\n    );\n    if (typeof cmdQuery.namedPlaceholders === 'undefined') {\n      cmdQuery.namedPlaceholders = this.config.connectionConfig.namedPlaceholders;\n    }\n    this.getConnection((err, conn) => {\n      if (err) {\n        if (typeof cmdQuery.onResult === 'function') {\n          cmdQuery.onResult(err);\n        } else {\n          cmdQuery.emit('error', err);\n        }\n        return;\n      }\n      try {\n        conn.query(cmdQuery).once('end', () => {\n          conn.release();\n        });\n      } catch (e) {\n        conn.release();\n        throw e;\n      }\n    });\n    return cmdQuery;\n  }\n\n  execute(sql, values, cb) {\n    // TODO construct execute command first here and pass it to connection.execute\n    // so that polymorphic arguments logic is there in one place\n    if (typeof values === 'function') {\n      cb = values;\n      values = [];\n    }\n    this.getConnection((err, conn) => {\n      if (err) {\n        return cb(err);\n      }\n      try {\n        conn.execute(sql, values, cb).once('end', () => {\n          conn.release();\n        });\n      } catch (e) {\n        conn.release();\n        return cb(e);\n      }\n    });\n  }\n\n  _removeConnection(connection) {\n    // Remove connection from all connections\n    spliceConnection(this._allConnections, connection);\n    // Remove connection from free connections\n    spliceConnection(this._freeConnections, connection);\n    this.releaseConnection(connection);\n  }\n\n  _removeIdleTimeoutConnections() {\n    if (this._removeIdleTimeoutConnectionsTimer) {\n      clearTimeout(this._removeIdleTimeoutConnectionsTimer);\n    }\n\n    this._removeIdleTimeoutConnectionsTimer = setTimeout(() => {\n      try {\n        while (\n          this._freeConnections.length > this.config.maxIdle &&\n          Date.now() - this._freeConnections.get(0).lastActiveTime >\n            this.config.idleTimeout\n        ) {\n          this._freeConnections.get(0).destroy();\n        }\n      } finally {\n        this._removeIdleTimeoutConnections();\n      }\n    }, 1000);\n  }\n\n  format(sql, values) {\n    return mysql.format(\n      sql,\n      values,\n      this.config.connectionConfig.stringifyObjects,\n      this.config.connectionConfig.timezone\n    );\n  }\n\n  escape(value) {\n    return mysql.escape(\n      value,\n      this.config.connectionConfig.stringifyObjects,\n      this.config.connectionConfig.timezone\n    );\n  }\n\n  escapeId(value) {\n    return mysql.escapeId(value, false);\n  }\n}\n\nmodule.exports = Pool;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}