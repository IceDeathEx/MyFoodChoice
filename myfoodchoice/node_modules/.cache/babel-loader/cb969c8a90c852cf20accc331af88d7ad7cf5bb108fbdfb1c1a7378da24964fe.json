{"ast":null,"code":"'use strict';\n\n// http://dev.mysql.com/doc/internals/en/connection-phase-packets.html#packet-Protocol::AuthSwitchRequest\nconst Packet = require('../packets/packet');\nclass AuthSwitchRequest {\n  constructor(opts) {\n    this.pluginName = opts.pluginName;\n    this.pluginData = opts.pluginData;\n  }\n  toPacket() {\n    const length = 6 + this.pluginName.length + this.pluginData.length;\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(0xfe);\n    // TODO: use server encoding\n    packet.writeNullTerminatedString(this.pluginName, 'cesu8');\n    packet.writeBuffer(this.pluginData);\n    return packet;\n  }\n  static fromPacket(packet) {\n    packet.readInt8(); // marker\n    // assert marker == 0xfe?\n    // TODO: use server encoding\n    const name = packet.readNullTerminatedString('cesu8');\n    const data = packet.readBuffer();\n    return new AuthSwitchRequest({\n      pluginName: name,\n      pluginData: data\n    });\n  }\n}\nmodule.exports = AuthSwitchRequest;","map":{"version":3,"names":["Packet","require","AuthSwitchRequest","constructor","opts","pluginName","pluginData","toPacket","length","buffer","Buffer","allocUnsafe","packet","offset","writeInt8","writeNullTerminatedString","writeBuffer","fromPacket","readInt8","name","readNullTerminatedString","data","readBuffer","module","exports"],"sources":["D:/UOW_FYP/FYP1/myfoodchoice/node_modules/mysql2/lib/packets/auth_switch_request.js"],"sourcesContent":["'use strict';\n\n// http://dev.mysql.com/doc/internals/en/connection-phase-packets.html#packet-Protocol::AuthSwitchRequest\n\nconst Packet = require('../packets/packet');\n\nclass AuthSwitchRequest {\n  constructor(opts) {\n    this.pluginName = opts.pluginName;\n    this.pluginData = opts.pluginData;\n  }\n\n  toPacket() {\n    const length = 6 + this.pluginName.length + this.pluginData.length;\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(0xfe);\n    // TODO: use server encoding\n    packet.writeNullTerminatedString(this.pluginName, 'cesu8');\n    packet.writeBuffer(this.pluginData);\n    return packet;\n  }\n\n  static fromPacket(packet) {\n    packet.readInt8(); // marker\n    // assert marker == 0xfe?\n    // TODO: use server encoding\n    const name = packet.readNullTerminatedString('cesu8');\n    const data = packet.readBuffer();\n    return new AuthSwitchRequest({\n      pluginName: name,\n      pluginData: data\n    });\n  }\n}\n\nmodule.exports = AuthSwitchRequest;\n"],"mappings":"AAAA,YAAY;;AAEZ;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAE3C,MAAMC,iBAAiB,CAAC;EACtBC,WAAWA,CAACC,IAAI,EAAE;IAChB,IAAI,CAACC,UAAU,GAAGD,IAAI,CAACC,UAAU;IACjC,IAAI,CAACC,UAAU,GAAGF,IAAI,CAACE,UAAU;EACnC;EAEAC,QAAQA,CAAA,EAAG;IACT,MAAMC,MAAM,GAAG,CAAC,GAAG,IAAI,CAACH,UAAU,CAACG,MAAM,GAAG,IAAI,CAACF,UAAU,CAACE,MAAM;IAClE,MAAMC,MAAM,GAAGC,MAAM,CAACC,WAAW,CAACH,MAAM,CAAC;IACzC,MAAMI,MAAM,GAAG,IAAIZ,MAAM,CAAC,CAAC,EAAES,MAAM,EAAE,CAAC,EAAED,MAAM,CAAC;IAC/CI,MAAM,CAACC,MAAM,GAAG,CAAC;IACjBD,MAAM,CAACE,SAAS,CAAC,IAAI,CAAC;IACtB;IACAF,MAAM,CAACG,yBAAyB,CAAC,IAAI,CAACV,UAAU,EAAE,OAAO,CAAC;IAC1DO,MAAM,CAACI,WAAW,CAAC,IAAI,CAACV,UAAU,CAAC;IACnC,OAAOM,MAAM;EACf;EAEA,OAAOK,UAAUA,CAACL,MAAM,EAAE;IACxBA,MAAM,CAACM,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnB;IACA;IACA,MAAMC,IAAI,GAAGP,MAAM,CAACQ,wBAAwB,CAAC,OAAO,CAAC;IACrD,MAAMC,IAAI,GAAGT,MAAM,CAACU,UAAU,CAAC,CAAC;IAChC,OAAO,IAAIpB,iBAAiB,CAAC;MAC3BG,UAAU,EAAEc,IAAI;MAChBb,UAAU,EAAEe;IACd,CAAC,CAAC;EACJ;AACF;AAEAE,MAAM,CAACC,OAAO,GAAGtB,iBAAiB"},"metadata":{},"sourceType":"script","externalDependencies":[]}